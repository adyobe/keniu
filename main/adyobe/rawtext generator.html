<!DOCTYPE html>
<html lang="ja">

<head>
  <script>console.log("(・ὢ・)見たな....")</script>
  <!-- LINE Tag Base Code -->
  <!-- Do Not Modify -->
  <script>
      (function (g, d, o) {
        g._ltq = g._ltq || []; g._lt = g._lt || function () { g._ltq.push(arguments) };
        var h = location.protocol === 'https:' ? 'https://d.line-scdn.net' : 'http://d.line-cdn.net';
        var s = d.createElement('script'); s.async = 1;
        s.src = o || h + '/n/line_tag/public/release/v1/lt.js';
        var t = d.getElementsByTagName('script')[0]; t.parentNode.insertBefore(s, t);
      })(window, document);
    _lt('init', {
      customerType: 'account',
      tagId: '31e6eaa0-0503-4711-9940-9716a1439ba6'
    });
    _lt('send', 'pv', ['31e6eaa0-0503-4711-9940-9716a1439ba6']);
  </script>
  <noscript>
    <img height="1" width="1" style="display:none" src="https://tr.line.me/tag.gif?c_t=lap&t_id=31e6eaa0-0503-4711-9940-9716a1439ba6&e=pv&noscript=1" />
  </noscript>
  <!-- End LINE Tag Base Code -->
  <script>
    _lt('send', 'cv', {
      type: 'Conversion'
    }, ['31e6eaa0-0503-4711-9940-9716a1439ba6']);
  </script>

  <title>minecraftCommandRawtextAutomaticGenerator</title>
  <meta charset="utf-8">
  <meta name="author" content="アヂョベ">
  <meta name="description" content="tellrawやtitlerawで使う文章を作ります">
  <meta name="keywords" content="minecraft,command,rawtext,automatic,generator,tellraw,titleraw">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
  <style>
    body {
      font-family: 'ＭＳ ゴシック', 'ＭＳ Ｐゴシック', 'MS UI Gothic', 'ＭＳ 明朝', 'ＭＳ Ｐ明朝', sans-serif, monospace, 'Courier', 'Courier New', 'Garamond', serif;
      margin: 8px;
    }

    .Black {
      color: #000000;
      text-shadow: 1.2px 1.2px 2px #000000;
    }

    .Dark_Blue {
      color: #0000AA;
      text-shadow: 1.2px 1.2px 2px #00002A;
    }

    .Dark_Green {
      color: #00AA00;
      text-shadow: 1.2px 1.2px 2px #002A00;
    }

    .Dark_Aqua {
      color: #00AAAA;
      text-shadow: 1.2px 1.2px 2px #002A2A;
    }

    .Dark_Red {
      color: #AA0000;
      text-shadow: 1.2px 1.2px 2px #2A0000;
    }

    .Dark_Purple {
      color: #AA00AA;
      text-shadow: 1.2px 1.2px 2px #2A002A;
    }

    .Gold {
      color: #FFAA00;
      text-shadow: 1.2px 1.2px 2px #2A2A00;
    }

    .Gray {
      color: #AAAAAA;
      text-shadow: 1.2px 1.2px 2px #2A2A2A;
    }

    .Dark_Gray {
      color: #555555;
      text-shadow: 1.2px 1.2px 2px #151515;
    }

    .Blue {
      color: #5555FF;
      text-shadow: 1.2px 1.2px 2px #15153F;
    }

    .Green {
      color: #55FF55;
      text-shadow: 1.2px 1.2px 2px #153F15;
    }

    .Aqua {
      color: #55FFFF;
      text-shadow: 1.2px 1.2px 2px #153F3F;
    }

    .Red {
      color: #FF5555;
      text-shadow: 1.2px 1.2px 2px #3F1515;
    }

    .Light_Purple {
      color: #FF55FF;
      text-shadow: 1.2px 1.2px 2px #3F153F;
    }

    .Yellow {
      color: #FFFF55;
      text-shadow: 1.2px 1.2px 2px #3F3F15;
    }

    .White {
      color: #FFFFFF;
      text-shadow: 1.2px 1.2px 2px #3F3F3F;
    }

    .darkmode {
      background-color: black;
      color: white;
    }

    .lightmode {
      background-color: white;
      color: black;
    }

    .none {
      color: initial
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-size: unset;
      margin-block-start: unset;
      margin-block-end: unset;
    }

    :-webkit-any(article, aside, nav, section) h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-size: unset;
      margin-block-start: unset;
      margin-block-end: unset;
    }

    label {
      cursor: pointer;
    }

    label * {
      cursor: pointer;
    }

    textarea {
      width: 100%;
      height: 30%;
    }


    .dot::before {
      content: "・";
    }

    .blank::before {
      white-space: pre;
      content: " ";
    }



    #line>* {
      border: 2px solid skyblue;
      border-radius: 4px;
      padding: 2px;
      margin: 2px 0;
      width: fit-content;
      max-width: 100%;
      overflow-wrap: break-word;
    }

    .opa {
      opacity: 50%;
    }

    .color {
      font-size: 0;
      background-color: lightgray;
      vertical-align: top;
    }

    .color>* {
      font-size: medium;
      font-weight: bold;
      display: inline-block;
      white-space: nowrap;
      overflow: hidden;
      width: 25%;
    }

    .color>*>* {
      margin: 4px 0;
    }

    .antimode {
      padding: 2px;
      border-radius: 4px;
    }
  </style>
</head>

<body style="background-color: black; color: white;">
  <main role="main">
    <article>
      <div>
        <!-- who -->
        <h1>誰を対象にしますか？</h1>
        <div>現在は <span id="who">@s</span> です。</div>
        <form>
          <div><label><input name="who" type="radio"><span>@a</span><span class="opa">全てのプレイヤー</span></label></div>
          <div><label><input name="who" type="radio"><span>@p</span><span class="opa">一番近くのプレイヤー</span></label></div>
          <div><label><input name="who" type="radio" checked><span>@s</span><span class="opa">自分自身</label></span></div>
          <div><label><input name="who" type="radio"><span>@r</span><span class="opa">ランダムなプレイヤー</label></span></div>
          <div><label><input name="who" type="radio"><span>@a[name="<span id="nametag"></span>"]</span><input onchange="document.getElementById('nametag').innerHTML=this.value" type="text" placeholder="ネームタグを入れる"><span class="opa">特定の一人</span></label></div>
          <div><label><input name="who" type="radio"><span id="customtag"></span><input onchange="document.getElementById('customtag').innerHTML=this.value" type="text" placeholder="カスタム"><span class="opa">カスタム</span></label></div>
        </form>
      </div>
      <div>
        <h1>出力結果</h1>
        <input type="button" value="リセット" onclick="this.nextElementSibling.children[0].value=this.nextElementSibling.children[0].innerHTML;result[6]=[];">
        <div><textarea id="output" class="antimode" rows="5">/tellraw @s {"rawtext":[{"translate":"%%S","with":{"rawtext":[{"text":"未入力です。"}]}}]}</textarea></div>
      </div>
      <div>
        <!-- color -->
        <h1>文字の色はどうしますか？</h1>
        <div>現在は <span id="color">未指定</span> です。</div>
        <form class="color">
          <div>
            <div class="Black"><label><input type="radio" name="color">黒</label></div>
            <div class="Dark_Blue"><label><input type="radio" name="color">濃い青</label></div>
            <div class="Dark_Green"><label><input type="radio" name="color">濃い緑</label></div>
            <div class="Dark_Aqua"><label><input type="radio" name="color">濃い水色</label></div>
          </div>
          <div>
            <div class="Dark_Red"><label><input type="radio" name="color">濃い赤色</label></div>
            <div class="Dark_Purple"><label><input type="radio" name="color">濃い紫</label></div>
            <div class="Gold"><label><input type="radio" name="color">金色</label></div>
            <div class="Gray"><label><input type="radio" name="color">灰色</label></div>
          </div>
          <div>
            <div class="Dark_Gray"><label><input type="radio" name="color">濃い灰色</label></div>
            <div class="Blue"><label><input type="radio" name="color">青</label></div>
            <div class="Green"><label><input type="radio" name="color">緑</label></div>
            <div class="Aqua"><label><input type="radio" name="color">水色</label></div>
          </div>
          <div>
            <div class="Red"><label><input type="radio" name="color">赤</label></div>
            <div class="Light_Purple"><label><input type="radio" name="color">薄い紫</label></div>
            <div class="Yellow"><label><input type="radio" name="color">黄色</label></div>
            <div class="White"><label><input type="radio" name="color">白</label></div>
          </div>
          <div>
            <div class="none"><label><input type="radio" name="color" checked>未指定</label></div>
          </div>
        </form>
      </div>
      <div>
        <!-- font -->
        <h1>フォントを指定してください。</h1>
        <h2 style="color: red;">統合版では打ち消し線と下線は未実装です。</h2>
        <div>現在は <span id="font">未選択</span> です。</div>
        <form class="font">
          <div class="Obfuscated"><label><input type="checkbox" name="font">難読化</label></div>
          <div class="Bold"><label><input type="checkbox" name="font">太字</label></div>
          <div class="Strikethrough"><label><input type="checkbox" name="font">打ち消し線</label></div>
          <div class="Underline"><label><input type="checkbox" name="font">下線</label></div>
          <div class="Italic"><label><input type="checkbox" name="font">斜体</label></div>
        </form>
      </div>
      <div>
        <!-- select -->
        <h1>種類を選んでください</h1>
        <div>現在は <span id="select">通常</span> です。</div>
        <form class="select">
          <div data-select="text"><label><input type="radio" name="select" checked>通常</label></div>
          <div data-select="translate"><label><input type="radio" name="select">コマンドメッセージ</label></div>
          <div data-select="score"><label><input type="radio" name="select">スコアボードの値</label></div>
          <div data-select="selector"><label><input type="radio" name="select">名前</label></div>
        </form>
      </div>
      <div id="input">
        <!-- input -->
        <div id="text">
          <!-- text -->
          <h2 class="dot">テキストを入力してください。</h2>
          <div><textarea id="textinput" rows="5"></textarea></div>
          <div><button onclick="output(document.getElementById('textinput').value)">出力</button></div>
        </div>
        <div id="translate">
          <!-- translate -->
          <h2 class="dot">テキストを入力してください。</h2>
          <div><textarea id="translateinput" rows="5"></textarea></div>
          <div><button onclick="output(document.getElementById('translateinput').value)">出力</button></div>
        </div>
        <div id="score">
          <!-- scoreboard -->
          <h2 class="dot">スコアボードを指定してください。</h2>
          <h3 style="color: red;">スコアボードに登録されていて、表示される読み手がそのスコアの値を持っていなければ表示されません。</h3>
          <!-- <div>現在は <span id="scoreinput">@s ???</span> です。</div> -->
          <h3 class="blank"><span class="dot"></span>スコアボードの対象を入力してください。</h3>
          <div class="blank">現在は <span id="scoreselector">@s</span> です。</div>
          <form class="scoreselector">
            <div class="blank"><label><input name="scoreselector" type="radio"><span>@a</span><span class="opa">全てのプレイヤー</span></label></div>
            <div class="blank"><label><input name="scoreselector" type="radio"><span>*</span><span class="opa">読み手毎にその人自身のスコアを表示</span></label></div>
            <div class="blank"><label><input name="scoreselector" type="radio"><span>@p</span><span class="opa">一番近くのプレイヤー</span></label></div>
            <div class="blank"><label><input name="scoreselector" type="radio" checked><span>@s</span><span class="opa">自分自身</label></span></div>
            <div class="blank"><label><input name="scoreselector" type="radio"><span>@r</span><span class="opa">ランダムなプレイヤー</span></label></div>
            <div class="blank"><label><input name="scoreselector" type="radio"><span>@a[name="<span id="nametagscore"></span>"]</span><input onchange="document.getElementById('nametagscore').innerHTML=this.value" type="text" placeholder="ネームタグを入れる"><span class="opa">特定の一人</span></label></div>
            <div class="blank"><label><input name="scoreselector" type="radio"><span id="customtagscore"></span><input onchange="document.getElementById('customtagscore').innerHTML=this.value" type="text" placeholder="カスタム"><span class="opa">カスタム</span></label></div>
          </form>
          <h3 class="blank"><span class="dot"></span>スコアボードの名前を入力してください。</h3>
          <div class="blank"><input id="scorename" type="text"></div>
          <h3 class="blank"><span class="dot"></span>スコアボードの値を偽って表示しますか？</h3>
          <form class="scorevalue">
            <div class="blank"><label><input name="scorevalue" type="checkbox"><span>いいえ</span></label></div>
            <div class="blank" style="display: none;"><label>嘘のスコアボードの値<input name="scorevalue" type="number" min="-2147483648" max="2147483647" value="0"></label></div>
          </form>
          <div><button onclick="output([document.getElementById('scoreselector').innerText,document.getElementById('scorename').value,document.getElementsByName('scorevalue')[0].checked?document.getElementsByName('scorevalue')[1].value:false])">出力</button></div>
        </div>
        <div id="selector">
          <!-- selector -->
          <h2 class="dot">誰を対象にしますか？</h2>
          <div>現在は <span id="selectorinput">@s</span> です。</div>
          <form class="selectorinput">
            <div><label><input name="selectorinput" type="radio"><span>@a</span><span class="opa">全てのプレイヤー</span></label></div>
            <div><label><input name="selectorinput" type="radio"><span>*</span><span class="opa">読み手毎にその人自身の名前を表示</span></label></div>
            <div><label><input name="selectorinput" type="radio"><span>@p</span><span class="opa">一番近くのプレイヤー</span></label></div>
            <div><label><input name="selectorinput" type="radio" checked><span>@s</span><span class="opa">自分自身</label></span></div>
            <div><label><input name="selectorinput" type="radio"><span>@r</span><span class="opa">ランダムなプレイヤー</span></label></div>
            <div><label><input name="selectorinput" type="radio"><span>@a[name="<span id="nametagselect"></span>"]</span><input onchange="document.getElementById('nametagselect').innerHTML=this.value" type="text" placeholder="ネームタグを入れる"><span class="opa">特定の一人</span></label></div>
            <div><label><input name="selectorinput" type="radio"><span id="customtagselect"></span><input onchange="document.getElementById('customtagselect').innerHTML=this.value" type="text" placeholder="カスタム"><span class="opa">カスタム</span></label></div>
          </form>
          <div><button onclick="output(document.getElementById('selectorinput').innerText)">出力</button></div>
        </div>
      </div>
      <div id="line">
      </div>
    </article>
    <script>
      let result = ['', '/tellraw ', "@s", ' {"rawtext":[{"translate":"', '","with":{"rawtext":[', ']}}]}', []];

      let darkORlight = false;
      if ("matchMedia" in window) {
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
          darkORlight = true;
        } else {
          darkORlight = false;
        }
      }
      const darkmode = boolean => {
        if (boolean) {
          document.body.setAttribute("style", "background-color: black; color: white;");
          for (const i of document.getElementsByClassName("antimode")) {
            i.setAttribute("style", "background-color: white; color: black;");
          }
        } else {
          document.body.setAttribute("style", "background-color: white; color: black;");
          for (const i of document.getElementsByClassName("antimode")) {
            i.setAttribute("style", "background-color: black; color: white;");
          }
        }
      }
      const inputchange = () => {
        for (const j of document.getElementById("input").children) {
          j.setAttribute("style", "display:none;");
        }
        document.getElementById(select[1]).removeAttribute("style");
      };


      let who = "@s";
      for (const i of document.getElementsByName("who")) {
        i.addEventListener("change", event => {
          who = event.target.nextElementSibling.innerText;
          document.getElementById("who").innerHTML = who;
          result[2] = who;
          output3();
        });
      }
      let color = "未指定";
      for (const i of document.getElementsByName("color")) {
        i.addEventListener("change", event => {
          color = event.target.parentNode.parentNode.className.replaceAll("_", " ");
          if (color == "none") {
            color = "未指定";
          }
          document.getElementById("color").innerHTML = color;
        });
      }
      let font = ["未選択"];
      for (const i of document.getElementsByName("font")) {
        i.addEventListener("change", event => {
          font = [];
          for (const j of document.getElementsByName("font")) {
            if (j.checked) font.push(j.parentNode.parentNode.className);
          }
          if (font.length == 0) {
            font.push("未指定");
          }
          document.getElementById("font").innerHTML = font.join(" ");
        });
      }
      let select = ["通常", "text"];
      for (const i of document.getElementsByName("select")) {
        i.addEventListener("change", event => {
          select[0] = event.target.parentNode.innerText;
          select[1] = event.target.parentNode.parentNode.dataset.select;
          inputchange();
          document.getElementById("select").innerHTML = select[0];
        });
      }
      let selectorinput = "@s";
      for (const i of document.getElementsByName("selectorinput")) {
        i.addEventListener("change", event => {
          selectorinput = event.target.nextElementSibling.innerText;
          document.getElementById("selectorinput").innerHTML = selectorinput;
        });
      }
      let scoreselector = "@s";
      for (const i of document.getElementsByName("scoreselector")) {
        i.addEventListener("change", event => {
          scoreselector = event.target.nextElementSibling.innerText;
          document.getElementById("scoreselector").innerHTML = scoreselector;
        });
      }
      document.getElementsByName("scorevalue")[0].addEventListener("change", event => {
        if (event.target.checked) {
          event.target.nextElementSibling.innerHTML = "はい"
          document.getElementsByName("scorevalue")[1].parentNode.parentNode.removeAttribute("style");
        } else {
          event.target.nextElementSibling.innerHTML = "いいえ"
          document.getElementsByName("scorevalue")[1].parentNode.parentNode.setAttribute("style", "display: none;");
        }
      });

      let linenumber = 0;
      const output = text => {
        let line = false;
        if (select[1] == "score") {
          if (text[1] != "") {
            line = true;
            text = '{"score":{"name":"' + text[0] + '","objective":"' + text[1] + (text[2] !== false ? '","value":"' + text[2] : '') + '"}}';
          }
        } else if (select[1] == "selector") {
          line = true;
          text = '{"selector":"' + text + '"}';
        } else {
          if (text != "") {
            line = true;
            text = text.replaceAll("\\", "\\\\");
            text = text.replaceAll("\"", "\\\"");
            text = text.replaceAll("\n", "\\n");
            text = text.replaceAll("\t", "\\t");
            text = text.replaceAll(" ", "\\u0020");
            if (select[1] == "text") {
              text = '{"text":"' + text + '"}';
            } else {
              text = '{"translate":"' + text + '"}';
            }
          }
        }
        if (line) {
          let linediv = document.createElement("div");
          let lineadd = document.createElement("input");
          let linedelete = document.createElement("input");
          let linespan = document.createElement("span");
          linespan.innerHTML = text;
          linediv.id = "line" + linenumber++;
          lineadd.type = "button";
          lineadd.value = "追加";
          lineadd.setAttribute("onclick", "output2(this.parentNode.innerText)");
          linedelete.type = "button";
          linedelete.value = "削除";
          linedelete.setAttribute("onclick", "this.parentNode.remove()");
          document.getElementById("line").appendChild(linediv);
          linediv.appendChild(lineadd);
          linediv.appendChild(linespan);
          linediv.appendChild(linedelete);
        }
      };
      const output2 = text => {
        let resulttext = ["", text];
        let resultcolor = " 10";
        for (let i = 0; i < document.getElementsByName("color").length - 1; i++) {
          if (color.replaceAll(" ", "_") == document.getElementsByName("color")[i].parentNode.parentNode.className) {
            resultcolor = "§" + i.toString(16);
            break;
          };
        }
        if (parseInt(resultcolor.slice(1), 16) < 16) {
          resulttext[0] += resultcolor;
        }
        let resultfont = "";
        if (font[0] != "未指定") {
          for (const i of font) {
            switch (i) {
              case "Obfuscated":
                resultfont += "§k";
                break;
              case "Bold":
                resultfont += "§l";
                break;
              case "Strikethrough":
                resultfont += "§m";
                break;
              case "Underline":
                resultfont += "§n";
                break;
              case "Italic":
                resultfont += "§o";
                break;
            }
          }
          resulttext[0] += resultfont;
        }
        result[6].push(resulttext);
        output3();
      };
      const output3 = () => {
        if (result[6].length > 0) {
          let percent = "";
          for (const i of result[6]) {
            percent += i[0] + "%%s";
            if (i[0] != "") {
              percent += "§r";
            }
          }
          result[0] = result[1] + result[2] + result[3] + percent + result[4] + result[6][0][1];
          for (let i = 1; i < result[6].length; i++) {
            result[0] += "," + result[6][i][1];
          }
          result[0] += result[5];
          document.getElementById("output").value = result[0];
        }
      };
      // {"rawtext":[{"translate":"%%S","with":{"rawtext":[{"text":"ahaha"}]}}]}

      // const replace = (beforetext = "", replacetext = "", start = 0, length = 0) => {
      //   let textbegin = beforetext.slice(0, start);
      //   let textend = beforetext.slice(start + length);
      //   let aftertext = textbegin + replacetext + textend;
      //   return aftertext;
      // };
      // for (let i = 0, j = text.length; i < j; i++) {
      //   if (text[i] == "\"") {
      //     text = replace(text, "\\\"", i++, 1);
      //     j++;
      //   }
      //   if (text[i] == "\n") {
      //     text = replace(text, "\\n", i++, 1);
      //     j++;
      //   }
      //   if (text[i] == "\t") {
      //     text = replace(text, "\\t", i++, 1);
      //     j++;
      //   }
      //   if (text[i] == "\\") {
      //     text = replace(text, "\\\\", i++, 1);
      //     j++;
      //   }
      //   if (text[i] == " ") {
      //     text = replace(text, "\\u0020", i, 1);
      //     i += 5;
      //     j += 5;
      //   }
      // }


      inputchange();
      darkmode(darkORlight);
    </script>
  </main>
</body>