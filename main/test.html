<!DOCTYPE html>
<html lang="ja">

<head></head>

<body>
  <section>
    <a href="https://translate.google.com/translate?sl=ja&tl=en&u=https://gothic-parser-317420.web.app/test.html">日→英</a>
    <a href="https://translate.google.com/translate?sl=en&tl=ja&u=https://gothic-parser-317420.web.app/test.html">英→日</a>
    <br>
    <input id="c" type="text">
    <br>
    <button onclick="S3()">順列</button>
    <button onclick="S4()">検索</button>
    <br>
    <textarea id="a" cols="30" rows="10"></textarea>
    <br>
    <button onclick='S1()'>入力</button>
    <button onclick='S2()'>出力</button>
    <div id="b"></div>
    <script>
      const S1 = () => {
        let j = [];
        for (const i of document.getElementById("b").children) {
          j.push(i.innerText)
        }
        document.getElementById("a").value = j.join("\n");
        return j;
      };
      const S2 = () => {

        document.getElementById("b").innerHTML = "";
        for (const i of document.getElementById("a").value.split("\n")) {
          let j = document.createElement("div");
          j.innerHTML = i;
          document.getElementById("b").appendChild(j);
        }
      }
      const permutation = c => {
        let split = c.match(/\(([^)]+)\)/)[1].split("/");
        let start = c.match(/(.*)\(/)[1];
        let end = c.match(/\)(.*)/)[1];
        let d = [[]];
        let a = b => {
          if (b.length > 1) {
            for (let i = 0; i < b.length; i++) {
              d[d.length - 1] = d[d.length - 1].slice(0, 2 * (split.length) - d[d.length - 1].length - b.length);
              d[d.length - 1].push(b[i]);
              let e = b.slice(0);
              e.splice(i, 1);
              a(e);
            }
          } else {
            d[d.length - 1].push(b[0]);
            d.push([])
            for (let j = 0; j < split.length; j++) {
              d[d.length - 1][j] = d[d.length - 2][j];
            }
          }
        }
        a(split);
        let j = [];
        for (const i of d.slice(0, d.length - 1)) {
          j.push(start + " " + i.join(" ") + " " + end);
        }
        return j;
      }
      const S3 = () => {
        document.getElementById("a").value = permutation(document.getElementById("c").value).join("\n");
      };
      const S4 = () => {
        // めんどくさくなっちゃった
      };
    </script>
  </section>
</body>

</html>